!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function checkForm(path){function validateInput(){var unique=void 0,pw=void 0,pwConfirm=void 0;submitBtn.disabled=!0,Array.from(inputs).every(function(input){return input.value.match(input.getAttribute("pattern"))})&&("createpoll"===path&&inputs.length>=3?(unique=new Set(Array.from(inputs).map(function(input){return input.value})),inputs.length===unique.size&&(submitBtn.disabled=!1)):"createpoll"!==path&&("signup"===path?(pw=form.querySelector(".form__input--password"),pwConfirm=form.querySelector(".form__input--confirm"),pw.value===pwConfirm.value?(pw.style.outline="initial",pwConfirm.style.outline="initial",submitBtn.disabled=!1):(pw.style.outline="1px solid red",pwConfirm.style.outline="1px solid red")):submitBtn.disabled=!1))}var form=document.querySelector("form"),inputs=document.getElementsByClassName("form__input"),submitBtn=document.querySelector('input[type="submit"]');submitBtn.disabled=!0,form.onkeyup=validateInput,form.onclick=validateInput}function playSplashPageAnimation(index){var words=["ideas","adventure","inspiration","books","swap"],el=document.querySelector(".transition--"+words[index]);el.classList.remove("is-invisible"),el.classList.remove("move-down-fade-in"),index||(el.classList.add("move-down-fade-out"),playSplashPageAnimation(index+1)),index===words.length-1&&(el.classList.add("translate--post"),document.querySelector(".banner__title--pre").classList.add("translate--pre"),setTimeout(function(){document.querySelector(".transition--books").lastChild.classList.add("is-invisible")},10)),el.addEventListener("transitionend",function handleEvent(e){el.classList.contains("move-down-fade-out")?(playSplashPageAnimation(index+1),el.removeEventListener("transitionend",handleEvent)):"opacity"===e.propertyName&&(index<words.length-2?el.classList.add("move-down-fade-out"):"books"===words[index]&&(playSplashPageAnimation(index+1),el.removeEventListener("transitionend",handleEvent)))})}function displayPreview(data,source){function createBook(){socket.emit("CREATE.book",bookObject),document.querySelector(".preview__submit").removeEventListener("click",createBook)}var bookObject={};if("external"===source){var json=data;bookObject.title=json.items[0].volumeInfo.title,bookObject.author=json.items[0].volumeInfo.authors,bookObject.description=json.items[0].volumeInfo.description,bookObject.thumbnail=json.items[0].volumeInfo.imageLinks.thumbnail,bookObject.link=json.items[0].volumeInfo.canonicalVolumeLink,json.items[0].volumeInfo.industryIdentifiers.forEach(function(id){"ISBN_10"===id.type?bookObject.ISBN_10=id.identifier:"ISBN_13"===id.type&&(bookObject.ISBN_13=id.identifier)}),document.querySelector(".preview__submit").classList.remove("is-not-displayed"),document.querySelector(".preview__submit").addEventListener("click",createBook)}else"internal"===source&&(document.querySelector(".preview__submit")&&(document.querySelector(".preview__submit").removeEventListener("click",createBook),document.querySelector(".preview__submit").classList.add("is-not-displayed")),bookObject.title=data.title,bookObject.author=data.author,bookObject.description=data.description,bookObject.link=data.link);console.log(bookObject),document.querySelector(".preview__link").textContent=bookObject.title,document.querySelector(".preview__link").href=bookObject.link;var authorsLength=bookObject.author.length,authorsArray=bookObject.author;if(authorsLength>2){authorsArray[authorsArray.length-1]="and "+authorsArray[authorsArray.length-1];document.querySelector(".preview__author").textContent=authorsArray.join(", ")}else document.querySelector(".preview__author").textContent=authorsLength>1?authorsArray.join(" and "):authorsArray[0];document.querySelector(".preview__description").textContent=bookObject.description,document.querySelector(".wrapper--preview").classList.remove("is-not-displayed")}function displayBook(book,queryEvent){var fragment=new DocumentFragment,newImg=document.createElement("img");newImg.classList.add("book__image"),newImg.src=book.thumbnail;var newDiv=document.createElement("div");newDiv.classList.add("book"),newDiv.classList.add("data-id="+book._id),newDiv.appendChild(newImg),newDiv.addEventListener("click",function(e){socket.emit("READ.book",{bookId:book._id})}),fragment.appendChild(newDiv),queryEvent?document.querySelector(".bookshelf--query").appendChild(fragment):document.querySelector(".bookshelf--complete").appendChild(fragment)}function renderQuery(data){document.querySelector(".bookshelf--complete").classList.add("is-not-displayed");for(var bookshelfQuery=document.querySelector(".bookshelf--query"),bookshelfComplete=document.querySelector(".bookshelf--complete"),wrapperQuery=document.querySelector(".wrapper--query");bookshelfQuery.hasChildNodes();)bookshelfQuery.removeChild(bookshelfQuery.lastChild);if(console.log(data),document.querySelector(".query__description__query-string").textContent=data.query,document.querySelector(".query__close").addEventListener("click",function(){bookshelfComplete.classList.remove("is-not-displayed"),wrapperQuery.classList.add("is-not-displayed"),bookshelfQuery.classList.add("is-not-displayed")}),bookshelfComplete.classList.add("is-not-displayed"),wrapperQuery.classList.remove("is-not-displayed"),bookshelfQuery.classList.remove("is-not-displayed"),data.books.length)for(var i=0;i<data.books.length;i++)displayBook(data.books[i],!0);else{var newDiv=document.createElement("div");newDiv.textContent="No results match the query.",newDiv.classList.add("no-result"),document.querySelector(".bookshelf--query").appendChild(newDiv)}}var socket=io();window.onload=function(){location.pathname.match(/^\/$/)&&socket.emit("change room",{room:location.pathname}),location.pathname.match(/^\/(?:allbookshelves|mybookshelf)\/?$/i)&&socket.emit("change room",{room:location.pathname.toLowerCase().slice(1)}),location.pathname.match(/^\/(?:signup|login|settings|allbookshelves|mybookshelf)\/?/i)&&socket.emit("leave room",{path:location.pathname.toLowerCase().slice(1)}),location.pathname.match(/^\/$/)&&setTimeout(function(){playSplashPageAnimation(0)},1500),location.pathname.match(/^\/(?:signup|login)\/?$/i)&&(document.querySelector("form").reset(),checkForm(location.pathname.toLowerCase().slice(1))),location.pathname.match(/^\/allbookshelves\/?$/i)&&(socket.on("CREATE.book.render",function(data){displayBook(data.book,!1)}),socket.emit("READ.bookshelves.all",{}),socket.on("READ.book.render",function(data){displayPreview(data.book,"internal")}),socket.on("READ.bookshelves.all.render",function(data){for(var i=0;i<data.books.length;i++)displayBook(data.books[i],!1)}),socket.on("UPDATE.bookshelves.render",function(data){}),document.querySelector(".search__bar__submit").addEventListener("click",function(e){var userInput=document.querySelector(".search__bar__input--allbookshelves").value;socket.emit("READ.bookshelves.query",{search:userInput.replace(/\$/g,"")})}),socket.on("READ.bookshelves.query.render",function(data){renderQuery(data)})),location.pathname.match(/^\/mybookshelf\/?$/i)&&(socket.on("CREATE.book.render",function(data){displayBook(data.book,!1)}),socket.emit("READ.bookshelf.all",{}),socket.on("READ.book.render",function(data){displayPreview(data.book,"internal")}),socket.on("READ.bookshelf.all.render",function(data){for(var i=0;i<data.books.length;i++)displayBook(data.books[i],!1)}),socket.on("UPDATE.bookshelf.render",function(data){}),document.querySelector(".search__bar__submit").addEventListener("click",function(e){var selectOption=document.querySelector(".search__bar__option").value,userInput=document.querySelector(".search__bar__input--mybookshelf").value;if("add"===selectOption){var queryURL="https://www.googleapis.com/books/v1/volumes?q="+userInput,encodedURL=encodeURI(queryURL),fetchHeaders={method:"GET",headers:{accept:"application/json"}};fetch(encodedURL,fetchHeaders).then(function(res){return res.json()}).then(function(json){json.totalItems?displayPreview(json,"external"):console.log("There are no books found with the given search criteria.")})}else"find"===selectOption&&socket.emit("READ.bookshelf.query",{search:userInput.replace(/\$/g,"")})}),socket.on("READ.bookshelf.query.render",function(data){renderQuery(data)}))}},{}]},{},[1]);
//# sourceMappingURL=post.bundle.js.map
