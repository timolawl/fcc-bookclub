!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function checkForm(path){function validateInput(){var unique=void 0,pw=void 0,pwConfirm=void 0;submitBtn.disabled=!0,Array.from(inputs).every(function(input){return input.value.match(input.getAttribute("pattern"))})&&("createpoll"===path&&inputs.length>=3?(unique=new Set(Array.from(inputs).map(function(input){return input.value})),inputs.length===unique.size&&(submitBtn.disabled=!1)):"createpoll"!==path&&("signup"===path?(pw=form.querySelector(".form__input--password"),pwConfirm=form.querySelector(".form__input--confirm"),pw.value===pwConfirm.value?(pw.style.outline="initial",pwConfirm.style.outline="initial",submitBtn.disabled=!1):(pw.style.outline="1px solid red",pwConfirm.style.outline="1px solid red")):submitBtn.disabled=!1))}var form=document.querySelector("form"),inputs=document.getElementsByClassName("form__input"),submitBtn=document.querySelector('input[type="submit"]');submitBtn.disabled=!0,form.onkeyup=validateInput,form.onclick=validateInput}function playSplashPageAnimation(index){var words=["ideas","adventure","inspiration","books","swap"],el=document.querySelector(".transition--"+words[index]);el.classList.remove("is-invisible"),el.classList.remove("move-down-fade-in"),index||(el.classList.add("move-down-fade-out"),playSplashPageAnimation(index+1)),index===words.length-1&&(el.classList.add("translate--post"),document.querySelector(".banner__title--pre").classList.add("translate--pre"),setTimeout(function(){document.querySelector(".transition--books").lastChild.classList.add("is-invisible")},10)),el.addEventListener("transitionend",function handleEvent(e){el.classList.contains("move-down-fade-out")?(playSplashPageAnimation(index+1),el.removeEventListener("transitionend",handleEvent)):"opacity"===e.propertyName&&(index<words.length-2?el.classList.add("move-down-fade-out"):"books"===words[index]&&(playSplashPageAnimation(index+1),el.removeEventListener("transitionend",handleEvent)))})}var socket=io();window.onload=function(){location.pathname.match(/^\/$/)&&socket.emit("change room",{room:location.pathname}),location.pathname.match(/^\/(?:signup|login|reset|createpoll|mybooks)\/?/i)&&socket.emit("leave room",{path:location.pathname.toLowerCase().slice(1)}),location.pathname.match(/^\/$/)&&setTimeout(function(){playSplashPageAnimation(0)},1500),location.pathname.match(/^\/(?:signup|login)\/?/i)&&(document.querySelector("form").reset(),checkForm(location.pathname.toLowerCase().slice(1))),location.pathname.match(/^\/mybookshelf$/)&&document.querySelector(".search__bar__submit").addEventListener("click",function(e){var selectOption=document.querySelector(".search__bar__option").value,userInput=document.querySelector(".search__bar__input--mybookshelf").value;if("add"===selectOption){var queryURL="https://www.googleapis.com/books/v1/volumes?q="+userInput,encodedURL=encodeURI(queryURL),fetchHeaders={method:"GET",headers:{accept:"application/json"}};fetch(encodedURL,fetchHeaders).then(function(res){return res.json()}).then(function(json){if(json.totalItems){document.querySelector(".preview__link").textContent=json.items[0].volumeInfo.title,document.querySelector(".preview__link").href=json.items[0].volumeInfo.canonicalVolumeLink;var authorsLength=json.items[0].volumeInfo.authors.length,authorsArray=json.items[0].volumeInfo.authors;if(authorsLength>2){authorsArray[authorsArray.length-1]="and "+authorsArray[authorsArray.length-1];document.querySelector(".preview__author").textContent=authorsArray.join(", ")}else document.querySelector(".preview__author").textContent=authorsLength>1?authorsArray.join(" and "):authorsArray[0];document.querySelector(".preview__excerpt").textContent=json.items[0].volumeInfo.description}}).then(function(){document.querySelector(".wrapper--preview").classList.remove("is-not-displayed"),document.querySelector(".preview__submit").addEventListener("click",function(e){})})}else"find"===selectOption&&socket.emit("search bookshelf",{search:userInput.replace(/\$/g,"")})})}},{}]},{},[1]);
//# sourceMappingURL=post.bundle.js.map
